Var
  TempHeaderList,TempListOfFilm,temp:TFilm;
  i:integer;
  search:boolean;

begin
  new(TempHeaderList);
  TempListOfFilm:=TempHeaderList;
  for i:=0 to LVFilm.Items.Count-1 do
  begin
    ListOfFilm:=HeaderList;
    search:=false;
    while (ListOfFilm<>nil) and not search do
    begin
      if (LVFilm.Items[i].Caption=ListOfFilm.Name) and
         (LVFilm.Items[i].SubItems[0]=ListOfFilm.Year) and
         (LVFilm.Items[i].SubItems[1]=ListOfFilm.Genre) then
      begin
        new(TempListOfFilm.next);
        TempListOfFilm:=TempListOfFilm.next;
        TempListOfFilm^:=ListOfFilm^;
        search:=true;
      end;
      ListOfFilm:=ListOfFilm.next;
    end;
  end;


  //окончание
  TempListOfFilm:=TempHeaderList;
  while TempListOfFilm.next<>nil do
  begin
    temp:=templistofFilm;
    while TempListOfFilm.next<>nil do
    begin
      temp:=TempListOfFilm;
      TempListOfFilm:=TempListOfFilm.next;
    end;
    dispose(TempListOfFilm);
    temp.next:=nil;
    TempListOfFilm:=TempHeaderList;
  end;
  dispose(TempHeaderList);